# SoundCath Real Time UltraSound Renderer #

## Brief ##

This Project is a real time renderer for Oldelft Ultrasound Boxes and Catheters.

## Authors ##

- [Orion Serup](orionserup@gmail.com)

## Dependencies ##

- A C++ Compiler (MSVC, GCC, or Clang)

- [Eigen](https://gitlab.com/libeigen/eigen.git) For the Linear Algebra

- [VTK](https://gitlab.kitware.com/vtk/vtk) For the Rendering and Visualization

- [Plog](https://github.com/SergiusTheBest/plog) For Logging

- [GCEM](https://github.com/kthohr/gcem) For Advanced Compile Time Math

- [fmt](https://github.com/fmtlib/fmt) For Advanced Text Formatting

- [CMake](https://cmake.org/) For building and Installing

- [ninja](https://github.com/ninja-build/ninja) or [make](https://www.gnu.org/software/make/) or [Visual Studio(Windows Only)](https://visualstudio.microsoft.com/)

## Optional Dependencies ##

- [Catch2](https://github.com/catchorg/Catch2) For Testing and Verification

- [Doxygen](https://www.doxygen.nl) For Documentation Generation

## Getting Started ##

Either download and install the dependencies or clone this repository recursively, that will install local copies of the dependencies to build and link against

git clone --recursive <this_url>

## Build Guide ##

In order to build this project you need to use CMake to compile and generate build files. Either using _cmake-gui_, _ccmake_ or cli _cmake_ navigate to the build directory and from there configure and generate to that folder. Using _ccmake_ or _cmake-gui_ that will be just pressing those buttons and setting the output to the same folder. For the cli _cmake_ that will be:

__cmake .__

Then to build the project either use the open folder option in cmake-gui or quit in ccmake. The command to build the file is

__cmake --build .__

For Windows using MSVC, you want to build the ALL_BUILD Target in Visual Studio after clicking the open folder in cmake-gui

## Installation Guide ##

- For MSVC/Visual Studio Build the INSTALL Target

- For Linux/Mac run "sudo cmake --install ."

## Outputs and Usage ##

### Outputs ###

- Static Library in the lib folder for external utility

- Executable in the bin folder that runs the renderer

- Test Executable in the test folder if generating tests

- Documentation in the docs folder if generating the docs (may have to use Doxywizard to generate in a windows system)

### Testing ###

Testing is operated through Catch2. An Executable is generated in the test folder, running it will spit the results to a log file as well as to the standard output.

### Usage ###

Running the program is very simple, just run the executable in the bin folder. This can be linked to anywhere in the system, it is important that the executable itself is not moved due to the dependence on a relatively located dll.

## Project Structure ##

If you would like to see a more in depth and technical view of the code structure, dependencies and such see the doxygen generated documentation in Latex or HTML form.

### Structural Overview ###

There are three seperate entities that make up the program: the Ultrasound catheter (Ultrasound class), the Renderer (Renderer class), and the GUI (GUI Class). They each can operate independently and can be tested as such. 

The Ultrasound class manages the FPGA, ASIC, and Physical Interface between all of them (A wrapper around the Oldelft DLL). It consists of a Controller, ASIC, and FPGA.
The ASIC manages the transducer and the actual pulse sending, it needs a driver/interface to send the commands to.
The FPGA manages the data capture and processing on the interface.
The Controller determines the correct delays/taylor coefficients for a given (x, y, z) or for a given angle, these are fed to the ASIC

The Renderer Class uses VTK assets and classes to generate a point cloud / isometric surface from the data generated by the Ultrasound class, this data can be put into a real time gui or into a video file or both

The GUI Class just presents a window to view the data coming from the Ultrasound
